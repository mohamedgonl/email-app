<!DOCTYPE html>
<html>
  <head>
    <title>Gmail API Quickstart</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body>
    <p>Gmail API Quickstart</p>

    <!--Add buttons to initiate auth sequence and sign out-->
    <button id="authorize_button" onclick="handleAuthClick()">Authorize</button>
    <button id="signout_button" onclick="handleSignoutClick()">Sign Out</button>
    <button id="send_mail_button" onclick="openSendEmail()">
      Create Email
    </button>

    <table id="data-table">
      <thead>
        <tr>
          <th>Số thứ tự</th>
          <th>Tên</th>
          <th>Người gửi</th>
          <th>Email</th>
          <th>Thời gian gửi</th>
          <th>Detail</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <table class="table table-striped table-inbox hidden">
      <thead>
        <tr>
          <th>From</th>
          <th>Subject</th>
          <th>Date/Time</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- Popup form read detail mail -->
    <div id="popup-form" class="popup-form">
      <div class="popup-content">
        <h2>Thông tin thư</h2>
        <label for="subject">Tên thư:</label>
        <input type="text" id="subject" readonly />
        <label for="sender">Người gửi:</label>
        <input type="text" id="sender" readonly />
        <label for="content">Nội dung thư:</label>
        <textarea name="" id="content" cols="30" rows="80"></textarea>
        <button
          id="close-popup-btn"
          onclick="document.getElementById('popup-form').style.display = 'none'"
        >
          Đóng
        </button>
      </div>
    </div>
    <!-- Popup form create mail -->
    <div id="popup-form-2" class="popup-form">
      <div class="popup-content">
        <h2>Tạo thư mới</h2>
        <label for="subject">Tiêu đề:</label>
        <input type="text" id="tieu_de" />
        <label for="email_receiver">Người nhận:</label>
        <input type="text" id="email_receiver" />
        <label for="content">Nội dung thư:</label>
        <textarea name="" id="content" cols="30" rows="80"></textarea>
        <label for="myfile">Đính kèm file</label>
        <input type="file" id="myfile" name="myfile" />
        <button id="close-popup-btn" onclick="sendEmail()">Gửi</button>
        <button
          id="close-popup-btn"
          onclick="document.getElementById('popup-form-2').style.display = 'none'"
        >
          Đóng
        </button>
      </div>
    </div>

    <pre id="content" style="white-space: pre-wrap"></pre>

    <script
      async
      defer
      src="https://apis.google.com/js/api.js"
      onload="gapiLoaded()"
    ></script>
    <script
      async
      defer
      src="https://accounts.google.com/gsi/client"
      onload="gisLoaded()"
    ></script>
    <script src="./script.js"></script>
  </body>
</html>
